# 자바의 절차적/구조적 프로그래밍


### 자바 프로그램의 개발과 구동

- JDK
    - Java Development Kit 자바 개발 도구
    - 자바 소스 컴파일러인 javac.exe 포함
    - 자바소스를 class파일로 변환 (byte코드 - jvm이 실행하는 형태)
- JRE
    - Java Runtime Environment 자바 실행 환경
    - 자바프로그램 실행기인 java.exe 포함
- JVM
    - Java Virtual Machine 자바 가상 머신
    - 자바 byte code를 실제 OS에 맞는 binary code로 변환할 수 있는 가상의 운영체제
    - 자바 프로그램이 플랫폼 독립적일 수 있게 함 (write once run anywhere)

        → 자바는 logical 플랫폼을 가짐으로 인해, physical 플랫폼에 독립적이다

        → JRE가 설치된 모든 운영체제에서 실행 가능 (OS에 맞는 JRE를 설치)

JDK를 이용해 개발한 프로그램은 JRE에 의해 JVM상에서 구동됨

### 메모리 사용 방식

1. 코드 실행 영역
2. 데이터 저장 영역
    1. static 영역 
        - 클래스영역
        - ClassLoader에 의해 클래스 객체가 로딩됨
    2. stack 영역 
        - 메소드 호출시 스택 추가, 종료시 스택 제거 (push/pop)
        - main()이 start 프레임, 메인스레드만 존재 시 stack영역 한 개
    3. Heap 영역 
        - 인스턴스 객체가 생성되는 영역
        - 힙에 생성된 객체나 배열은 stack영역의 변수나 다른 객체의 필드에서 참조함
        - 참조가 없으면 reference counter가 0이 되고 GC의 대상이 됨
        - String Constant Pool
            - 상수 관리
            - 이미 존재하는 문자열 생성하지 않고 찾아감
            - new String() 으로 생성 시 새로운 문자열 생성

Q> Function과 Method의 차이점

A> 함수는 클래스나 객체와 관계가 없이 독립적으로 존재, 메소드는 클래스 정의 안에 존재해야함

### 프로그램의 시작점 - main() 메소드

- main() 메소드는 프로그램의 시작이자 끝

    main() 메소드가 종료하면 JRE는 JVM을 종료하고, JRE도 운영체제 상 메모리에서 사라짐

### 프로그램 실행 과정

- JRE가 프로그램 안에 main() 메소드를 확인 후 JVM 구동
- JVM은 메모리 구조 생성
- JVM의 전처리 과정
    - java.lang 패키지를 스태틱영역에 할당
    - 작성된 클래스와 import클래스들을 스태틱영역에 할당
      static영역은 main() 메소드가 시작하기 전에 올라가고, main종료 후 내려옴

- main() 메소드의 스택프레임을 스택영역에 할당
- 메소드 로컬변수, 파라미터를 main() 스택프레임 안에 할당
- 프로그램 실행
- main() 메소드 스택프레임 소멸
- 메모리 소멸, JVM 구동 중지, JRE가 사용했던 시스템 자원을 운영체제에 반납

### 변수와 메모리

- 지역 변수 - 스택영역의 스택프레임 (프레임과 함께 사라짐)
    - 스택 프레임

        { } 블록 시작시 생성

        { } 안에 선언된 변수는 블록 종료시 사라진다는 의미

        외부 스택프레임에서 내부 스택프레임 접근 불가능, 반대는 가능함

    - 메소드의 블랙변수화

        input, output 에 의해서만 메소드 사이의 값 전달

        내부 지역변수는 볼 수 없다는 의미

- 멤버 변수 - 힙 영역 (GC에 의해 회수)
- 클래스 변수 - 스태틱 영역 (JVM이 종료될 때 까지 고정된 상태)

### 멀티스레드와 멀티프로레스

- 멀티스레드
    - T메모리 중 스택영역을 스레드 개수만큼 분할
    - 스태틱영역, 힙영역은 공유해서 사용
- 멀티 프로세스
    - 다수의 T메모리를 가지는 구조
